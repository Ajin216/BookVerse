<!DOCTYPE html>
<html lang="en">


<!-- molla/dashboard.html  22 Nov 2019 10:03:13 GMT -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>BOOKVERSE</title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Molla - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/icons/favicon-16x16.png">
    <link rel="manifest" href="assets/images/icons/site.html">
    <link rel="mask-icon" href="assets/images/icons/safari-pinned-tab.svg" color="#666666">
    <link rel="shortcut icon" href="assets/images/icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="Molla">
    <meta name="application-name" content="Molla">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="msapplication-config" content="assets/images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- Main CSS File -->
    <link rel="stylesheet" href="assets/css/style.css">


    <!-- Add in your header -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>



    <style>
        /* General modal styles */
.modal-content {
    border-radius: 10px;
    background-color: #f8f9fa; /* Light gray background for a polished look */
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
}

/* Modal header styles */
.modal-header {
    background-color:#42c8f5; /* Primary blue */
    color: white;
    padding: 15px 20px;
    border-bottom: 2px solid #0056b3; /* Darker blue border */
    border-radius: 10px 10px 0 0; /* Rounded corners for the top */
}

.modal-title {
    font-size: 18px;
    font-weight: bold;
}

/* Modal body padding */
.modal-body {
    padding: 20px;
}

/* Form input styling */
.form-label {
    font-weight: bold;
    margin-bottom: 5px;
    color: #495057; /* Neutral dark gray for labels */
}

.form-control {
    border-radius: 5px;
    border: 1px solid #ced4da;
    box-shadow: none; /* Remove default box shadow */
    transition: border-color 0.3s ease;
}

.form-control:focus {
    border-color: #007bff; /* Blue border on focus */
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.25); /* Subtle focus glow */
}

/* Modal footer styles */
.modal-footer {
    padding: 15px 20px;
    background-color: #f1f1f1;
    border-top: 1px solid #e9ecef;
    border-radius: 0 0 10px 10px; /* Rounded corners for the bottom */
}

/* Button styles */
.btn-primary {
    background-color: #42c8f5;
    border: none;
    border-radius: 5px;
    padding: 10px 20px;
    transition: background-color 0.3s ease;
}

.btn-primary:hover {
    background-color: #0056b3;
}

.btn-secondary {
    border-radius: 5px;
    padding: 10px 20px;
    color: #6c757d;
    border: none;
}

.btn-secondary:hover {
    background-color: #d6d6d6;
}

/* Adjust modal dialog to center it and limit its size */
.modal-dialog {
    max-width: 500px; /* Restrict modal width */
    margin: 1.75rem auto;
}

/* Optional: Add custom padding for the modal */
.modal-body input {
    margin-bottom: 15px; /* Add spacing between input fields */
}

    </style>




</head>

<body>
    <div class="page-wrapper">
        <header class="header">
            <div class="header-top">
                <div class="container">
                    <div class="header-left">



                    </div><!-- End .header-left -->

                    <div class="header-right">
                        <ul class="top-menu">
                            <!-- <li>
                                <a href="#">Links</a>
                                <ul>
                                    <li><a href="tel:#"><i class="icon-phone"></i>Call: +0123 456 789</a></li>
                                    <li><a href="wishlist.html"><i class="icon-heart-o"></i>Wishlist <span>(3)</span></a></li>
                                    <li><a href="about.html">About Us</a></li>
                                    <li><a href="contact.html">Contact Us</a></li>
                                    <li><a href="#signin-modal" data-toggle="modal"><i class="icon-user"></i>Login</a></li>
                                </ul>
                            </li> -->
                        </ul><!-- End .top-menu -->
                    </div><!-- End .header-right -->
                </div><!-- End .container -->
            </div><!-- End .header-top -->

            <div class="header-middle sticky-header">
                <div class="container">
                    <div class="header-left">
                        <button class="mobile-menu-toggler">
                            <span class="sr-only">Toggle mobile menu</span>
                            <i class="icon-bars"></i>
                        </button>

                        <a href="/" class="logo">
                            <h3>BOOKVERSE</h3>
                        </a>

                        <nav class="main-nav">
                            <ul class="menu sf-arrows">
                                <li class="megamenu-container active">
                                    <a href="/" class="sf-with-ul">Home</a>


                                </li>
                                <li>
                                    <a href="/shop" class="sf-with-ul">Shop</a>

                                </li>
                                
                            </ul><!-- End .menu -->
                        </nav><!-- End .main-nav -->
                    </div><!-- End .header-left -->

                </div><!-- End .container -->
            </div><!-- End .header-middle -->
        </header><!-- End .header -->

        <main class="main">
            <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
                <div class="container">
                    <h1 class="page-title">Address</h1>
                </div><!-- End .container -->
            </div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <!-- <li class="breadcrumb-item"><a href="#">Shop</a></li> -->
                        <li class="breadcrumb-item active" aria-current="page">My Address</li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->





            <div class="page-content">


                <div class="dashboard">
                    <div class="container">
                        <div class="row">
                            <aside class="col-md-4 col-lg-3">
                                <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="tab-dashboard-link" href="/profile" role="tab"
                                            aria-controls="tab-dashboard" aria-selected="true">Profile</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-address-link" href="" role="tab"
                                            aria-controls="tab-address" aria-selected="false">Addresses</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-orders-link" href="/order" role="tab"
                                            aria-controls="tab-orders" aria-selected="false">Orders</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-wallet-link" href="/wallet" role="tab"
                                             aria-controls="tab-wallet" aria-selected="false">Wallet</a>
                                    </li>
                                    
                                </ul>
                            </aside>

                            <div class="col-md-8 col-lg-9">
                                <!-- Add Address Button -->
                                <div class="text-center mb-4">
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                        data-bs-target="#addAddressModal">
                                        Add New Address
                                    </button>
                                </div>

                                <!-- Address Display Section -->
                                <div class="row" id="addressesContainer">
                                    <% addresses.forEach(function(address) { %>
                                        <div class="col-md-6 col-lg-4 mb-4">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="address-details">
                                                        <p><strong>Name:</strong>
                                                            <%= address.addressName %>
                                                        </p>
                                                        <p><strong>House:</strong>
                                                            <%= address.addressHouse %>
                                                        </p>
                                                        <p><strong>Post Office:</strong>
                                                            <%= address.addressPost %>
                                                        </p>
                                                        <p><strong>District:</strong>
                                                            <%= address.addressDistrict %>
                                                        </p>
                                                        <p><strong>State:</strong>
                                                            <%= address.addressState %>
                                                        </p>
                                                        <p><strong>PIN Code:</strong>
                                                            <%= address.addressPin %>
                                                        </p>
                                                        <p><strong>Mobile:</strong>
                                                            <%= address.addressMobile %>
                                                        </p>
                                                    </div>
                                                    <div class="d-flex justify-content-between mt-3">
                                                        <button class="btn btn-sm btn-warning edit-address"
                                                            data-address-id="<%= address._id %>" data-bs-toggle="modal"
                                                            data-bs-target="#editAddressModal">
                                                            Edit
                                                        </button>
                                                        <button class="btn btn-sm btn-danger delete-address"
                                                            data-address-id="<%= address._id %>">
                                                            Delete
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <% }); %>
                                </div>



                                <!-- <a href="/checkout" class="btn btn-primary">
                                    Go to Checkout
                                </a> -->


                                <!-- Add Address Modal -->
                                <div class="modal fade" id="addAddressModal" tabindex="-1" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title">Add New Address</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <form id="addressForm">
                                                    <div class="mb-3">
                                                        <label for="addressName" class="form-label">Full Name</label>
                                                        <input type="text" class="form-control" id="addressName"
                                                            name="addressName" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="addressMobile" class="form-label">Mobile
                                                            Number</label>
                                                        <input type="tel" class="form-control" id="addressMobile"
                                                            name="addressMobile" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="addressHouse" class="form-label">House
                                                            Name/Number</label>
                                                        <input type="text" class="form-control" id="addressHouse"
                                                            name="addressHouse" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="addressPost" class="form-label">Post Office</label>
                                                        <input type="text" class="form-control" id="addressPost"
                                                            name="addressPost" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="addressDistrict" class="form-label">District</label>
                                                        <input type="text" class="form-control" id="addressDistrict"
                                                            name="addressDistrict" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="addressState" class="form-label">State</label>
                                                        <input type="text" class="form-control" id="addressState"
                                                            name="addressState" required>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="addressPin" class="form-label">PIN Code</label>
                                                        <input type="number" class="form-control" id="addressPin"
                                                            name="addressPin" required>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary"
                                                            data-bs-dismiss="modal">Close</button>
                                                        <button type="submit" class="btn btn-primary">Save
                                                            Address</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                
                                <!-- Edit Address Modal -->
<!-- Edit Address Modal -->
<div class="modal fade" id="editAddressModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Address</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editAddressForm">
                    <!-- Add a hidden input for address ID -->
                    <input type="hidden" id="editAddressId" name="addressId">
                    
                    <div class="mb-3">
                        <label for="editAddressName" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="editAddressName" name="addressName" required>
                    </div>
                    <div class="mb-3">
                        <label for="editAddressMobile" class="form-label">Mobile Number</label>
                        <input type="tel" class="form-control" id="editAddressMobile" name="addressMobile" required>
                    </div>
                    <div class="mb-3">
                        <label for="editAddressHouse" class="form-label">House Name/Number</label>
                        <input type="text" class="form-control" id="editAddressHouse" name="addressHouse" required>
                    </div>
                    <div class="mb-3">
                        <label for="editAddressPost" class="form-label">Post Office</label>
                        <input type="text" class="form-control" id="editAddressPost" name="addressPost" required>
                    </div>
                    <div class="mb-3">
                        <label for="editAddressDistrict" class="form-label">District</label>
                        <input type="text" class="form-control" id="editAddressDistrict" name="addressDistrict" required>
                    </div>
                    <div class="mb-3">
                        <label for="editAddressState" class="form-label">State</label>
                        <input type="text" class="form-control" id="editAddressState" name="addressState" required>
                    </div>
                    <div class="mb-3">
                        <label for="editAddressPin" class="form-label">PIN Code</label>
                        <input type="number" class="form-control" id="editAddressPin" name="addressPin" required>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Update Address</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

                            </div>
                        </div>
                    </div>
                </div>





        </div><!-- End .container -->
    </div><!-- End .dashboard -->
    </div><!-- End .page-content -->



    </main><!-- End .main -->

    <footer class="footer">
        <div class="footer-middle">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-lg-3">
                        <div class="widget widget-about">
                            <h3>BOOKVERSE</h3>
                            <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate
                                magna eros eu erat. </p>

                            <div class="social-icons">
                                <a href="#" class="social-icon" target="_blank" title="Facebook"><i
                                        class="icon-facebook-f"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Twitter"><i
                                        class="icon-twitter"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Instagram"><i
                                        class="icon-instagram"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Youtube"><i
                                        class="icon-youtube"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Pinterest"><i
                                        class="icon-pinterest"></i></a>
                            </div><!-- End .soial-icons -->
                        </div><!-- End .widget about-widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="about.html">About Molla</a></li>
                                <li><a href="#">How to shop on Molla</a></li>
                                <li><a href="#">FAQ</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="login.html">Log in</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Payment Methods</a></li>
                                <li><a href="#">Money-back guarantee!</a></li>
                                <li><a href="#">Returns</a></li>
                                <li><a href="#">Shipping</a></li>
                                <li><a href="#">Terms and conditions</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Sign In</a></li>
                                <li><a href="cart.html">View Cart</a></li>
                                <li><a href="#">My Wishlist</a></li>
                                <li><a href="#">Track My Order</a></li>
                                <li><a href="#">Help</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </div><!-- End .footer-middle -->

        <div class="footer-bottom">
            <div class="container">
                <p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p>
                <!-- End .footer-copyright -->
                <figure class="footer-payments">
                    <img src="assets/images/payments.png" alt="Payment methods" width="272" height="20">
                </figure><!-- End .footer-payments -->
            </div><!-- End .container -->
        </div><!-- End .footer-bottom -->
    </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

    <div class="mobile-menu-container">
        <div class="mobile-menu-wrapper">
            <span class="mobile-menu-close"><i class="icon-close"></i></span>

            <form action="#" method="get" class="mobile-search">
                <label for="mobile-search" class="sr-only">Search</label>
                <input type="search" class="form-control" name="mobile-search" id="mobile-search"
                    placeholder="Search in..." required>
                <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
            </form>

            <nav class="mobile-nav">
                <ul class="mobile-menu">
                    <li class="active">
                        <a href="index.html">Home</a>

                        <ul>
                            <li><a href="index-1.html">01 - furniture store</a></li>
                            <li><a href="index-2.html">02 - furniture store</a></li>
                            <li><a href="index-3.html">03 - electronic store</a></li>
                            <li><a href="index-4.html">04 - electronic store</a></li>
                            <li><a href="index-5.html">05 - fashion store</a></li>
                            <li><a href="index-6.html">06 - fashion store</a></li>
                            <li><a href="index-7.html">07 - fashion store</a></li>
                            <li><a href="index-8.html">08 - fashion store</a></li>
                            <li><a href="index-9.html">09 - fashion store</a></li>
                            <li><a href="index-10.html">10 - shoes store</a></li>
                            <li><a href="index-11.html">11 - furniture simple store</a></li>
                            <li><a href="index-12.html">12 - fashion simple store</a></li>
                            <li><a href="index-13.html">13 - market</a></li>
                            <li><a href="index-14.html">14 - market fullwidth</a></li>
                            <li><a href="index-15.html">15 - lookbook 1</a></li>
                            <li><a href="index-16.html">16 - lookbook 2</a></li>
                            <li><a href="index-17.html">17 - fashion store</a></li>
                            <li><a href="index-18.html">18 - fashion store (with sidebar)</a></li>
                            <li><a href="index-19.html">19 - games store</a></li>
                            <li><a href="index-20.html">20 - book store</a></li>
                            <li><a href="index-21.html">21 - sport store</a></li>
                            <li><a href="index-22.html">22 - tools store</a></li>
                            <li><a href="index-23.html">23 - fashion left navigation store</a></li>
                            <li><a href="index-24.html">24 - extreme sport store</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="category.html">Shop</a>
                        <ul>
                            <li><a href="category-list.html">Shop List</a></li>
                            <li><a href="category-2cols.html">Shop Grid 2 Columns</a></li>
                            <li><a href="category.html">Shop Grid 3 Columns</a></li>
                            <li><a href="category-4cols.html">Shop Grid 4 Columns</a></li>
                            <li><a href="category-boxed.html"><span>Shop Boxed No Sidebar<span
                                            class="tip tip-hot">Hot</span></span></a></li>
                            <li><a href="category-fullwidth.html">Shop Fullwidth No Sidebar</a></li>
                            <li><a href="product-category-boxed.html">Product Category Boxed</a></li>
                            <li><a href="product-category-fullwidth.html"><span>Product Category Fullwidth<span
                                            class="tip tip-new">New</span></span></a></li>
                            <li><a href="cart.html">Cart</a></li>
                            <li><a href="checkout.html">Checkout</a></li>
                            <li><a href="wishlist.html">Wishlist</a></li>
                            <li><a href="#">Lookbook</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="product.html" class="sf-with-ul">Product</a>
                        <ul>
                            <li><a href="product.html">Default</a></li>
                            <li><a href="product-centered.html">Centered</a></li>
                            <li><a href="product-extended.html"><span>Extended Info<span
                                            class="tip tip-new">New</span></span></a></li>
                            <li><a href="product-gallery.html">Gallery</a></li>
                            <li><a href="product-sticky.html">Sticky Info</a></li>
                            <li><a href="product-sidebar.html">Boxed With Sidebar</a></li>
                            <li><a href="product-fullwidth.html">Full Width</a></li>
                            <li><a href="product-masonry.html">Masonry Sticky Info</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Pages</a>
                        <ul>
                            <li>
                                <a href="about.html">About</a>

                                <ul>
                                    <li><a href="about.html">About 01</a></li>
                                    <li><a href="about-2.html">About 02</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="contact.html">Contact</a>

                                <ul>
                                    <li><a href="contact.html">Contact 01</a></li>
                                    <li><a href="contact-2.html">Contact 02</a></li>
                                </ul>
                            </li>
                            <li><a href="login.html">Login</a></li>
                            <li><a href="faq.html">FAQs</a></li>
                            <li><a href="404.html">Error 404</a></li>
                            <li><a href="coming-soon.html">Coming Soon</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="blog.html">Blog</a>

                        <ul>
                            <li><a href="blog.html">Classic</a></li>
                            <li><a href="blog-listing.html">Listing</a></li>
                            <li>
                                <a href="#">Grid</a>
                                <ul>
                                    <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                                    <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                                    <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                                    <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Masonry</a>
                                <ul>
                                    <li><a href="blog-masonry-2cols.html">Masonry 2 columns</a></li>
                                    <li><a href="blog-masonry-3cols.html">Masonry 3 columns</a></li>
                                    <li><a href="blog-masonry-4cols.html">Masonry 4 columns</a></li>
                                    <li><a href="blog-masonry-sidebar.html">Masonry sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Mask</a>
                                <ul>
                                    <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                                    <li><a href="blog-mask-masonry.html">Blog mask masonry</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Single Post</a>
                                <ul>
                                    <li><a href="single.html">Default with sidebar</a></li>
                                    <li><a href="single-fullwidth.html">Fullwidth no sidebar</a></li>
                                    <li><a href="single-fullwidth-sidebar.html">Fullwidth with sidebar</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="elements-list.html">Elements</a>
                        <ul>
                            <li><a href="elements-products.html">Products</a></li>
                            <li><a href="elements-typography.html">Typography</a></li>
                            <li><a href="elements-titles.html">Titles</a></li>
                            <li><a href="elements-banners.html">Banners</a></li>
                            <li><a href="elements-product-category.html">Product Category</a></li>
                            <li><a href="elements-video-banners.html">Video Banners</a></li>
                            <li><a href="elements-buttons.html">Buttons</a></li>
                            <li><a href="elements-accordions.html">Accordions</a></li>
                            <li><a href="elements-tabs.html">Tabs</a></li>
                            <li><a href="elements-testimonials.html">Testimonials</a></li>
                            <li><a href="elements-blog-posts.html">Blog Posts</a></li>
                            <li><a href="elements-portfolio.html">Portfolio</a></li>
                            <li><a href="elements-cta.html">Call to Action</a></li>
                            <li><a href="elements-icon-boxes.html">Icon Boxes</a></li>
                        </ul>
                    </li>
                </ul>
            </nav><!-- End .mobile-nav -->

            <div class="social-icons">router.post("/profile/edit", userAuth, profileController.updateProfile);
                <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
            </div><!-- End .social-icons -->
        </div><!-- End .mobile-menu-wrapper -->
    </div><!-- End .mobile-menu-container -->


    <!-- Plugins JS File -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.hoverIntent.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/superfish.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
    // Form validation function with more comprehensive checks
    const validateForm = (formData) => {
        const name = formData.get('addressName').trim();
        const house = formData.get('addressHouse').trim();
        const post = formData.get('addressPost').trim();
        const district = formData.get('addressDistrict').trim();
        const state = formData.get('addressState').trim();
        const mobile = formData.get('addressMobile').trim();
        const pin = formData.get('addressPin').trim();

        // Validation checks with specific error messages
        const validationRules = [
            { 
                condition: !/^[a-zA-Z\s'-]+$/.test(name), 
                message: 'Name must contain only letters, spaces, hyphens, or apostrophes' 
            },
            { 
                condition: name.length < 2 || name.length > 50, 
                message: 'Name must be between 2 and 50 characters' 
            },
            { 
                condition: house.length < 3 || house.length > 100, 
                message: 'House/Flat details must be between 3 and 100 characters' 
            },
            { 
                condition: post.length < 3 || post.length > 50, 
                message: 'Post Office name must be between 3 and 50 characters' 
            },
            { 
                condition: district.length < 3 || district.length > 50, 
                message: 'District name must be between 3 and 50 characters' 
            },
            { 
                condition: state.length < 3 || state.length > 50, 
                message: 'State name must be between 3 and 50 characters' 
            },
            { 
                condition: !/^[6-9]\d{9}$/.test(mobile), 
                message: 'Mobile number must start with 6, 7, 8, or 9 and be a valid 10-digit number' 
            },
            { 
                condition: !/^\d{6}$/.test(pin), 
                message: 'PIN code must be a valid 6-digit number' 
            }
        ];

        // Find first validation error
        const failedRule = validationRules.find(rule => rule.condition);
        
        return failedRule ? { valid: false, message: failedRule.message } : { valid: true };
    };

    // Form submission handler
    document.getElementById('addressForm').addEventListener('submit', async function (e) {
        e.preventDefault();

        const submitButton = this.querySelector('button[type="submit"]');
        submitButton.disabled = true;

        const formData = new FormData(this);
        const validationResult = validateForm(formData);

        // Use Sweet Alert for validation and submission feedback
        if (!validationResult.valid) {
            Swal.fire({
                icon: 'error',
                title: 'Validation Error',
                text: validationResult.message,
                confirmButtonColor: '#3085d6'
            });
            submitButton.disabled = false;
            return;
        }

        const addressData = Object.fromEntries(formData.entries());

        try {
            const response = await fetch('/api/address', {
                method: 'POST',
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(addressData)
            });

            const result = await response.json();

            if (response.ok) {
                // Success Sweet Alert
                Swal.fire({
                    icon: 'success',
                    title: 'Address Added',
                    text: 'Your address has been successfully added!',
                    showConfirmButton: false,
                    timer: 1500
                });

                // Add new address to DOM
                const addressesContainer = document.getElementById('addressesContainer');
                const newAddressHTML = `
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="address-details">
                                    <p><strong>Name:</strong> ${addressData.addressName}</p>
                                    <p><strong>House:</strong> ${addressData.addressHouse}</p>
                                    <p><strong>Post Office:</strong> ${addressData.addressPost}</p>
                                    <p><strong>District:</strong> ${addressData.addressDistrict}</p>
                                    <p><strong>State:</strong> ${addressData.addressState}</p>
                                    <p><strong>PIN Code:</strong> ${addressData.addressPin}</p>
                                    <p><strong>Mobile:</strong> ${addressData.addressMobile}</p>
                                </div>
                                <div class="d-flex justify-content-between mt-3">
                                    <button class="btn btn-sm btn-warning edit-address" 
                                            data-address-id="${result.addressId}"
                                            data-bs-toggle="modal" 
                                            data-bs-target="#editAddressModal">
                                        Edit
                                    </button>
                                    <button class="btn btn-sm btn-danger delete-address" 
                                            data-address-id="${result.addressId}">
                                        Delete
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                addressesContainer.insertAdjacentHTML('beforeend', newAddressHTML);

                // Close modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('addAddressModal'));
                modal.hide();
                this.reset();
            } else {
                // Error handling with Sweet Alert
                if (response.status === 401) {
                    Swal.fire({
                        icon: 'warning',
                        title: 'Session Expired',
                        text: 'Please login to continue',
                        confirmButtonColor: '#3085d6',
                        confirmButtonText: 'Go to Login'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = '/login';
                        }
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Add Address Failed',
                        text: result.message || 'Unable to add address. Please try again.',
                        confirmButtonColor: '#3085d6'
                    });
                }
            }
        } catch (error) {
            console.error('Error adding address:', error);
            Swal.fire({
                    icon: 'success',
                    title: 'Address Added',
                    text: 'Your address has been successfully added!',
                    showConfirmButton: false,
                    timer: 1500
                }).then(() => {
                // Reload the page after the alert is shown
                window.location.reload();
            });

        } finally {
            submitButton.disabled = false;
        }
    });
});






//EDIT ADDRESS
document.addEventListener('DOMContentLoaded', () => {
    // Modal Population Event Listener
    document.getElementById('editAddressModal').addEventListener('show.bs.modal', function(e) {
        const editButton = e.relatedTarget;
        const addressId = editButton.getAttribute('data-address-id');
        const addressCard = editButton.closest('.card');
        const paragraphs = addressCard.querySelectorAll('.address-details p');

        document.getElementById('editAddressId').value = addressId;
        document.getElementById('editAddressName').value = paragraphs[0].textContent.replace('Name:', '').trim();
        document.getElementById('editAddressHouse').value = paragraphs[1].textContent.replace('House:', '').trim();
        document.getElementById('editAddressPost').value = paragraphs[2].textContent.replace('Post Office:', '').trim();
        document.getElementById('editAddressDistrict').value = paragraphs[3].textContent.replace('District:', '').trim();
        document.getElementById('editAddressState').value = paragraphs[4].textContent.replace('State:', '').trim();
        document.getElementById('editAddressPin').value = paragraphs[5].textContent.replace('PIN Code:', '').trim();
        document.getElementById('editAddressMobile').value = paragraphs[6].textContent.replace('Mobile:', '').trim();
    });

    // Form Submission Event Listener
    document.getElementById('editAddressForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const submitButton = this.querySelector('button[type="submit"]');
        submitButton.disabled = true;

        const formData = new FormData(this);
        const validationErrors = [];

        // Name Validation
        const addressName = formData.get('addressName').trim();
        if (!/^[a-zA-Z\s'-]+$/.test(addressName)) {
            validationErrors.push('Name must contain only letters, spaces, hyphens, or apostrophes');
        }
        if (addressName.length < 2) {
            validationErrors.push('Name must be at least 2 characters long');
        }

        // Mobile Validation
        const addressMobile = formData.get('addressMobile').trim();
        const mobileRegex = /^[6-9]\d{9}$/;
        if (!mobileRegex.test(addressMobile)) {
            validationErrors.push('Invalid mobile number');
        }

        // PIN Code Validation
        const addressPin = formData.get('addressPin').trim();
        const pinRegex = /^\d{6}$/;
        if (!pinRegex.test(addressPin)) {
            validationErrors.push('PIN code must be 6 digits');
        }

        // House Address Validation
        const addressHouse = formData.get('addressHouse').trim();
        if (!addressHouse || addressHouse.length < 3) {
            validationErrors.push('House address is too short');
        }

        // Other field validations
        const addressPost = formData.get('addressPost').trim();
        if (addressPost.length < 3) {
            validationErrors.push('Post Office name is too short');
        }

        const addressDistrict = formData.get('addressDistrict').trim();
        if (addressDistrict.length < 3) {
            validationErrors.push('District name is too short');
        }

        const addressState = formData.get('addressState').trim();
        if (addressState.length < 3) {
            validationErrors.push('State name is too short');
        }

        // Check for validation errors
        if (validationErrors.length > 0) {
            Swal.fire({
                icon: 'warning',
                title: 'Validation Errors',
                html: validationErrors.map(err => `• ${err}`).join('<br>'),
                confirmButtonColor: '#3085d6'
            });
            submitButton.disabled = false;
            return;
        }

        // Submit the form data via fetch API
        const response = await fetch('/api/address/update', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(Object.fromEntries(formData.entries()))
        });

        const result = await response.json();

        if (response.ok) {
            Swal.fire({
                icon: 'success',
                title: 'Success!',
                text: result.message || 'Address updated successfully.',
                showConfirmButton: false,
                timer: 1500
            });

            // Update the address in the UI
            const addressCard = document.querySelector(`.edit-address[data-address-id="${formData.get('addressId')}"]`).closest('.card');
            const paragraphs = addressCard.querySelectorAll('.address-details p');

            paragraphs[0].innerHTML = `<strong>Name:</strong> ${formData.get('addressName')}`;
            paragraphs[1].innerHTML = `<strong>House:</strong> ${formData.get('addressHouse')}`;
            paragraphs[2].innerHTML = `<strong>Post Office:</strong> ${formData.get('addressPost')}`;
            paragraphs[3].innerHTML = `<strong>District:</strong> ${formData.get('addressDistrict')}`;
            paragraphs[4].innerHTML = `<strong>State:</strong> ${formData.get('addressState')}`;
            paragraphs[5].innerHTML = `<strong>PIN Code:</strong> ${formData.get('addressPin')}`;
            paragraphs[6].innerHTML = `<strong>Mobile:</strong> ${formData.get('addressMobile')}`;

            // Close the modal
            bootstrap.Modal.getInstance(document.getElementById('editAddressModal')).hide();
        } else {
            Swal.fire({
                icon: 'error',
                title: 'Error!',
                text: result.message || 'Failed to update address.',
                confirmButtonColor: '#d33'
            });
        }

        submitButton.disabled = false;
    });
});







    // Delete Address Functionality
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('delete-address')) {
            const addressId = e.target.getAttribute('data-address-id');
            
            // Confirm deletion with Sweet Alert
            Swal.fire({
                title: 'Are you sure?',
                text: 'Do you want to delete this address?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, delete it!'
            }).then(async (result) => {
                if (result.isConfirmed) {
                    try {
                        const response = await fetch(`/api/address/${addressId}`, {
                            method: 'DELETE',
                            credentials: 'include'
                        });

                        const result = await response.json();

                        if (response.ok) {
                            // Remove address from DOM
                            const addressCard = e.target.closest('.col-md-6');
                            addressCard.remove();

                            // Show success message
                            Swal.fire({
                                icon: 'success',
                                title: 'Deleted!',
                                text: 'Your address has been deleted.',
                                showConfirmButton: false,
                                timer: 1500
                            });
                        } else {
                            // Handle errors
                            Swal.fire({
                                icon: 'error',
                                title: 'Delete Failed',
                                text: result.message || 'Unable to delete address. Please try again.',
                                confirmButtonColor: '#3085d6'
                            });
                        }
                    } catch (error) {
                        console.error('Error deleting address:', error);
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: 'Something went wrong. Please try again.',
                            confirmButtonColor: '#3085d6'
                        });
                    }
                }
            });
        }
    });


    </script>



</body>


<!-- molla/product.html  22 Nov 2019 09:55:05 GMT -->

</html>




                            
